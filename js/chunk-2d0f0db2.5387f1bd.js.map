{"version":3,"sources":["webpack:///./src/views/Week-4.vue","webpack:///./src/views/Week-4.vue?b438"],"names":["class","_createElementVNode","width","_createElementBlock","disabled","$data","onClick","$options","_hoisted_3","_hoisted_5","_Fragment","_renderList","item","key","id","_toDisplayString","category","title","origin_price","price","is_enabled","type","_hoisted_7","_hoisted_8","data","products","isLoading","mounted","this","$store","state","isLogin","$router","push","auth","check","then","res","success","getProducts","catch","err","response","message","commit","methods","setProductId","action","selectedProductId","productModal","show","delProductModal","admin","pagination","addProduct","product","updateProduct","deleteProduct","__exports__","render"],"mappings":"4IACOA,MAAM,a,GACJA,MAAM,iB,kBASJA,MAAM,c,EACXC,eAmBQ,cAlBNA,eAiBK,WAhBHA,eAEK,MAFDC,MAAM,OAAM,QAGhBD,eAAa,UAAT,QACJA,eAEK,MAFDC,MAAM,OAAM,QAGhBD,eAEK,MAFDC,MAAM,OAAM,QAGhBD,eAEK,MAFDC,MAAM,OAAM,UAGhBD,eAEK,MAFDC,MAAM,OAAM,YAfpB,G,GAyCWF,MAAM,a,4EApDrBG,eAwEM,MAxEN,EAwEM,CAvEJF,eAQM,MARN,EAQM,CAPJA,eAMS,UALPD,MAAM,kBACLI,SAAUC,YACVC,QAAK,+BAAEC,eAAY,aACrB,WAED,EAAAC,KAEFP,eA6DQ,QA7DR,EA6DQ,CA5DNQ,EAoBAR,eAuCQ,kCAtCNE,eAqCKO,OAAA,KAAAC,eApCYN,YAAQ,SAAhBO,G,wBADTT,eAqCK,MAnCFU,IAAKD,EAAKE,IAFb,CAIEb,eAA4B,UAAAc,eAArBH,EAAKI,UAAQ,GACpBf,eAAyB,UAAAc,eAAlBH,EAAKK,OAAK,GACjBhB,eAEK,UAAAc,eADAH,EAAKM,cAAY,GAEtBjB,eAEK,UAAAc,eADAH,EAAKO,OAAK,GAEflB,eAMK,WALHA,eAIO,QAHJD,MAAK,gBAAGY,EAAKQ,WAAU,mCAD1B,eAGKR,EAAKQ,WAAU,iBAGtBnB,eAiBK,WAhBHA,eAeM,MAfN,EAeM,CAdJA,eAMS,UALPoB,KAAK,SACLrB,MAAM,iCACLM,QAAK,mBAAEC,eAAaK,EAAKE,GAAE,UAC7B,OAED,EAAAQ,GACArB,eAMS,UALPoB,KAAK,SACLrB,MAAM,gCACLM,QAAK,mBAAEC,eAAaK,EAAKE,GAAE,SAC7B,OAED,EAAAS,YAlCN,Y,gBA+CO,GACbC,KADa,WAEX,MAAO,CACLC,SAAU,GACVC,WAAW,IAGfC,QAPa,WAOH,WACHC,KAAKC,OAAOC,MAAMC,SACrBH,KAAKI,QAAQC,KAAK,UAGpBC,OACGC,QACAC,MAAK,SAACC,GACL,IAAQb,EAASa,EAATb,KACJA,EAAKc,SACP,EAAKC,iBAGRC,OAAM,SAACC,GACN,IAAQjB,EAASiB,EAAIC,SAAblB,KACR,EAAKmB,QAAUnB,EAAKmB,QACpB,EAAKL,QAAUd,EAAKc,QACpB,EAAKT,OAAOe,OAAO,UACnB,EAAKZ,QAAQC,KAAK,cAGxBY,QAAS,CACPC,aADO,SACMhC,EAAIiC,GAGf,OAFAnB,KAAKoB,kBAAoBlC,EACzBc,KAAKmB,OAASA,EACNA,GACN,IAAK,MACL,IAAK,OACHnB,KAAKqB,aAAaC,OAClB,MACF,IAAK,MACHtB,KAAKuB,gBAAgBD,OACrB,MACF,WAGJX,YAfO,WAeO,WACZX,KAAKF,WAAY,EACjB0B,OACGb,cACAH,MAAK,SAACC,GACL,IAAQb,EAASa,EAATb,KACR,EAAKC,SAAWD,EAAKC,SACrB,EAAK4B,WAAa7B,EAAK6B,WACvB,EAAK3B,WAAY,KAElBc,OAAM,SAACC,GACN,IAAQjB,EAASiB,EAAIC,SAAblB,KACR,EAAKmB,QAAUnB,EAAKmB,QACpB,EAAKL,QAAUd,EAAKc,QACpB,EAAKT,OAAOe,OAAO,UACnB,EAAKZ,QAAQC,KAAK,cAGxBqB,WAjCO,WAiCM,WACX1B,KAAKF,WAAY,EACjB0B,OACGE,WAAW1B,KAAK2B,SAChBnB,MAAK,SAACC,GACL,IAAQb,EAASa,EAATb,KACR,EAAKmB,QAAUnB,EAAKmB,QACpB,EAAKL,QAAUd,EAAKc,QACpB,EAAKC,iBAENC,OAAM,SAACC,GACN,IAAQjB,EAASiB,EAAIC,SAAblB,KACR,EAAKmB,QAAUnB,EAAKmB,QACpB,EAAKL,QAAUd,EAAKc,QACpB,EAAKT,OAAOe,OAAO,UACnB,EAAKZ,QAAQC,KAAK,UAClB,EAAKM,kBAGXiB,cApDO,WAoDS,WACd5B,KAAKF,WAAY,EACjB0B,OACGI,cAAc5B,KAAKoB,kBAAmBpB,KAAK2B,SAC3CnB,MAAK,SAACC,GACL,IAAQb,EAASa,EAATb,KACR,EAAKC,SAAWD,EAAKC,SACrB,EAAK4B,WAAa7B,EAAK6B,WACvB,EAAKV,QAAUnB,EAAKmB,QACpB,EAAKL,QAAUd,EAAKc,QACpB,EAAKC,iBAENC,OAAM,SAACC,GACN,IAAQjB,EAASiB,EAAIC,SAAblB,KACR,EAAKmB,QAAUnB,EAAKmB,QACpB,EAAKL,QAAUd,EAAKc,QACpB,EAAKT,OAAOe,OAAO,UACnB,EAAKZ,QAAQC,KAAK,cAGxBwB,cAxEO,WAwES,WACd7B,KAAKF,WAAY,EACjB0B,OACGK,cAAc7B,KAAKoB,mBACnBZ,MAAK,SAACC,GACL,IAAQb,EAASa,EAATb,KACR,EAAKC,SAAWD,EAAKC,SACrB,EAAK4B,WAAa7B,EAAK6B,WACvB,EAAKV,QAAUnB,EAAKmB,QACpB,EAAKL,QAAUd,EAAKc,QACpB,EAAKC,iBAENC,OAAM,SAACC,GACN,IAAQjB,EAASiB,EAAIC,SAAblB,KACR,EAAKmB,QAAUnB,EAAKmB,QACpB,EAAKL,QAAUd,EAAKc,QACpB,EAAKT,OAAOe,OAAO,UACnB,EAAKZ,QAAQC,KAAK,gB,qBChM5B,MAAMyB,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d0f0db2.5387f1bd.js","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"text-end mt-4\">\n      <button\n        class=\"btn btn-primary\"\n        :disabled=\"isLoading\"\n        @click=\"setProductId('', 'add')\"\n      >\n        建立新的產品\n      </button>\n    </div>\n    <table class=\"table mt-4\">\n      <thead>\n        <tr>\n          <th width=\"120\">\n            分類\n          </th>\n          <th>產品名稱</th>\n          <th width=\"120\">\n            原價\n          </th>\n          <th width=\"120\">\n            售價\n          </th>\n          <th width=\"100\">\n            是否啟用\n          </th>\n          <th width=\"120\">\n            編輯\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr\n          v-for=\"item in products\"\n          :key=\"item.id\"\n        >\n          <td>{{ item.category }}</td>\n          <td>{{ item.title }}</td>\n          <td>\n            {{ item.origin_price }}\n          </td>\n          <td>\n            {{ item.price }}\n          </td>\n          <td>\n            <span\n              :class=\"[item.is_enabled ? 'text-success' : 'text-secondary']\"\n            >\n              {{ item.is_enabled ? '啟用' : '未啟用' }}\n            </span>\n          </td>\n          <td>\n            <div class=\"btn-group\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-primary btn-sm\"\n                @click=\"setProductId(item.id, 'edit')\"\n              >\n                編輯\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger btn-sm\"\n                @click=\"setProductId(item.id, 'del')\"\n              >\n                刪除\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\n// import { Modal } from 'bootstrap';\nimport { auth, admin } from '@/services';\n\nexport default {\n  data() {\n    return {\n      products: [],\n      isLoading: true,\n    };\n  },\n  mounted() {\n    if (!this.$store.state.isLogin) {\n      this.$router.push('/login');\n    }\n\n    auth\n      .check()\n      .then((res) => {\n        const { data } = res;\n        if (data.success) {\n          this.getProducts();\n        }\n      })\n      .catch((err) => {\n        const { data } = err.response;\n        this.message = data.message;\n        this.success = data.success;\n        this.$store.commit('logout');\n        this.$router.push('/login');\n      });\n  },\n  methods: {\n    setProductId(id, action) {\n      this.selectedProductId = id;\n      this.action = action;\n      switch (action) {\n        case 'add':\n        case 'edit':\n          this.productModal.show();\n          break;\n        case 'del':\n          this.delProductModal.show();\n          break;\n        default:\n      }\n    },\n    getProducts() {\n      this.isLoading = true;\n      admin\n        .getProducts()\n        .then((res) => {\n          const { data } = res;\n          this.products = data.products;\n          this.pagination = data.pagination;\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          const { data } = err.response;\n          this.message = data.message;\n          this.success = data.success;\n          this.$store.commit('logout');\n          this.$router.push('/login');\n        });\n    },\n    addProduct() {\n      this.isLoading = true;\n      admin\n        .addProduct(this.product)\n        .then((res) => {\n          const { data } = res;\n          this.message = data.message;\n          this.success = data.success;\n          this.getProducts();\n        })\n        .catch((err) => {\n          const { data } = err.response;\n          this.message = data.message;\n          this.success = data.success;\n          this.$store.commit('logout');\n          this.$router.push('/login');\n          this.getProducts();\n        });\n    },\n    updateProduct() {\n      this.isLoading = true;\n      admin\n        .updateProduct(this.selectedProductId, this.product)\n        .then((res) => {\n          const { data } = res;\n          this.products = data.products;\n          this.pagination = data.pagination;\n          this.message = data.message;\n          this.success = data.success;\n          this.getProducts();\n        })\n        .catch((err) => {\n          const { data } = err.response;\n          this.message = data.message;\n          this.success = data.success;\n          this.$store.commit('logout');\n          this.$router.push('/login');\n        });\n    },\n    deleteProduct() {\n      this.isLoading = true;\n      admin\n        .deleteProduct(this.selectedProductId)\n        .then((res) => {\n          const { data } = res;\n          this.products = data.products;\n          this.pagination = data.pagination;\n          this.message = data.message;\n          this.success = data.success;\n          this.getProducts();\n        })\n        .catch((err) => {\n          const { data } = err.response;\n          this.message = data.message;\n          this.success = data.success;\n          this.$store.commit('logout');\n          this.$router.push('/login');\n        });\n    },\n  },\n};\n</script>\n","import { render } from \"./Week-4.vue?vue&type=template&id=91154632\"\nimport script from \"./Week-4.vue?vue&type=script&lang=js\"\nexport * from \"./Week-4.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/hex-cli/hex-cli/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}